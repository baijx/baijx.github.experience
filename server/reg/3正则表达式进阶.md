# 正则表达式进阶
https://blog.csdn.net/handsomexiaominge/article/details/87886857
## 分组
在正则表达式中还提供了一种将表达式分组的机制，当使用分组时，除了获得整个匹配,还能够在匹配中选择每一个分组。使用()实现。
```
文本：<p>hello</p>
要求：提取<p> </p>中的数据
正则：<p>(.*?)</p>

文本：2019-5013-08
要求：提起学号，分为3组
正则：(\d{4})-(\d{4})-(\d{2})
```

## 或者条件
使用分组的同时还可以使用 或者（or）条件，用|实现。
```
要求：视频文件的后缀名有 .mp4、.avi、.wmv、.rmvb，请编写正则表达式提取所有的视频文件的后缀
正则：(.mp4|.avi|.wmv|.rmvb)
```

## 非捕获分组
有时候，我们并不需要捕获（缓存）某个分组的内容供后续使用，但是又想使用分组的特性。这个时候就可以使用非捕获组(?:表达式)
```
要求：匹配两个字符或者4个字符的单词
正则：\b(?:\w{2}|\w{4})\b
```

## 分组的回溯引用
有些时候，我们会寻找到一个匹配，该匹配接下来会再次出现。例如```<p>提示</p>```的html标签，想让后面分组的正则和第一个分组的正则匹配同样的数据该如何做呢？可以使用分组的回溯引用，使用\N可以引用编号为N的分组
```
文本：<p>hello</p> <div>world</div> 
要求：提取标签中的数据
正则：<(\w+)>(.*?)</\1>
```

## 断言
| 表达式             | 说明                                                      |
|-----------------|---------------------------------------------------------|
| (?=pattern)   | 正向肯定断言，在任何匹配pattern的字符串开始处匹配查找字符串。非获取匹配，该匹配不需要获取供以后使用。  |
| (?!pattern)  | 正向否定断言，在任何不匹配pattern的字符串开始处匹配查找字符串。非获取匹配，该匹配不需要获取供以后使用。 |
| (?<=pattern)  | 反向肯定断言，与正向肯定断言类似，只是方向相反。                                |
| (?<!pattern) | 反向否定断言，与正向否定断言类似，只是方向相反。                                |

## 正向肯定断言
tar(?=pattern)，从匹配到tar开始，向右看（正向），右侧满足pattern规则，则得到结果tar。tar为空则代表整个字符串。--TODO:需要进一步验证
```
文本：喜欢你 喜欢我 我喜欢你
要求：找到跟着【你】字的【喜欢】两字
正则：喜欢(?=你)

要求：至少1个小写字符，至少1个大写字符，至少1个数字，至少8位
正则：(?=.*?[a-z])(?=.*?[A-Z])(?=.*?[0-9])(.{8,})
```

## 正向否断言
tar(?!pattern)，从匹配到tar开始，向右看（正向），右侧不能满足pattern规则，则继续匹配。保证了右边不能出现pattern规则的字符。
```
文本：喜欢你 喜欢我 我喜欢你
要求：找到不跟着【你】字的【喜欢】两字
正则：喜欢(?!你)

要求：匹配非qq邮箱
正则：[0-9a-zA-Z]+@(?!qq)[0-9a-zA-Z]+\.com
```

## 反向肯定断言
(?<=pattern)tar，从匹配到tar开始，向左看（反向），左侧必须满足pattern规则。
```
文本：喜欢你 喜欢我 我喜欢你
要求：找到【喜欢】两字，前面是【我】
正则：(?<=我)喜欢

文本：王芳芳 芳芳 大王 张三
要求：找到王姓的名字
正则：(?<=王).+
```

## 反向否断言
(?<!pattern)tar，从匹配到tar开始，向左看（反向），左侧不符合pattern规则。
```
文本：喜欢你 喜欢我 我喜欢你
要求：找到【喜欢】两字，前面不是【我】
正则：(?<!我)喜欢

文本：$ aaa bbb ccc $
要求：用断言的方式匹配$中间的文字。--^\$[^\$]+\$$
正则：(?<!\$)\$[^\$]+\$(?!\$)
```